{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/raghu/Fanance/fanance-dapp/app/frontend/src/hocs/FetchContractData.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport FetchContractData1 from \"./FetchContractData1\";\nexport default function FetchContractData(props) {\n  _s();\n\n  const [buyOrderCount, setBuyOrderCount] = useState(0);\n  const [sellOrderCount, setSellOrderCount] = useState(0); // To provide as dependency for useEffect\n\n  const events = props.drizzleState.contracts[\"CelebrityExchange\"].events;\n  const [completedTrades, setCompletedTrades] = useState([]);\n  const [tokensList, setTokensList] = useState([]);\n  useEffect(() => {\n    const tempBuyOrderCount = props.drizzle.contracts.CelebrityExchange.methods[\"buyOrderCount\"].cacheCall();\n    setBuyOrderCount(tempBuyOrderCount);\n    const tempSellOrderCount = props.drizzle.contracts.CelebrityExchange.methods[\"sellOrderCount\"].cacheCall();\n    setSellOrderCount(tempSellOrderCount); //Fetch tokens from CelebrityToken\n\n    const tempTokensList = props.drizzle.contracts.TokenGenerator.methods[\"getAllCelebrities\"].cacheCall();\n    setTokensList(tempTokensList); // Fetch trades from events\n\n    async function getTrades(exchangeContract) {\n      const web3 = props.drizzle.web3;\n      const contract = props.drizzle.contracts[\"CelebrityExchange\"];\n      const yourContractWeb3 = new web3.eth.Contract(contract.abi, contract.address);\n      let completedBuyOrders = [];\n      let completedSellOrders = [];\n      let FilledBuyOrders = await yourContractWeb3.getPastEvents(\"BuyOrderFilled\", {\n        fromBlock: 0,\n        toBlock: \"latest\"\n      });\n      FilledBuyOrders.map(event => {\n        completedBuyOrders.push(event.returnValues);\n      });\n      let FilledSellOrders = await yourContractWeb3.getPastEvents(\"SellOrderFilled\", {\n        fromBlock: 0,\n        toBlock: \"latest\"\n      });\n      console.log(FilledSellOrders);\n      FilledSellOrders.map(event => {\n        completedSellOrders.push(event.returnValues);\n      });\n      return setCompletedTrades(completedBuyOrders.concat(completedSellOrders));\n    }\n\n    let trades = getTrades(props.drizzle.contracts.CelebrityExchange);\n    props.handleCompletedTrades(trades); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.drizzle.contracts.CelebrityExchange, props.drizzle.contracts.TokenGenerator, events]);\n  return /*#__PURE__*/_jsxDEV(FetchContractData1, {\n    drizzle: props.drizzle,\n    drizzleState: props.drizzleState,\n    buyOrderCount: buyOrderCount,\n    handleBuyOrders: props.handleBuyOrders,\n    sellOrderCount: sellOrderCount,\n    handleSellOrders: props.handleSellOrders,\n    handleTokensList: props.handleTokensList,\n    tokensList: tokensList,\n    handleLatestPrice: props.handleLatestPrice\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 3\n  }, this);\n}\n\n_s(FetchContractData, \"APn2YNPFGj2Dtjo1sa6aRAzlky8=\");\n\n_c = FetchContractData;\n\nvar _c;\n\n$RefreshReg$(_c, \"FetchContractData\");","map":{"version":3,"sources":["/Users/raghu/Fanance/fanance-dapp/app/frontend/src/hocs/FetchContractData.js"],"names":["React","useState","useEffect","FetchContractData1","FetchContractData","props","buyOrderCount","setBuyOrderCount","sellOrderCount","setSellOrderCount","events","drizzleState","contracts","completedTrades","setCompletedTrades","tokensList","setTokensList","tempBuyOrderCount","drizzle","CelebrityExchange","methods","cacheCall","tempSellOrderCount","tempTokensList","TokenGenerator","getTrades","exchangeContract","web3","contract","yourContractWeb3","eth","Contract","abi","address","completedBuyOrders","completedSellOrders","FilledBuyOrders","getPastEvents","fromBlock","toBlock","map","event","push","returnValues","FilledSellOrders","console","log","concat","trades","handleCompletedTrades","handleBuyOrders","handleSellOrders","handleTokensList","handleLatestPrice"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport FetchContractData1 from \"./FetchContractData1\";\n\nexport default function FetchContractData(props) {\n\tconst [buyOrderCount, setBuyOrderCount] = useState(0);\n\tconst [sellOrderCount, setSellOrderCount] = useState(0);\n\t// To provide as dependency for useEffect\n\tconst events = props.drizzleState.contracts[\"CelebrityExchange\"].events;\n\tconst [completedTrades, setCompletedTrades] = useState([]);\n\tconst [tokensList, setTokensList] = useState([]);\n\tuseEffect(() => {\n\t\tconst tempBuyOrderCount = props.drizzle.contracts.CelebrityExchange.methods[\n\t\t\t\"buyOrderCount\"\n\t\t].cacheCall();\n\t\tsetBuyOrderCount(tempBuyOrderCount);\n\t\tconst tempSellOrderCount = props.drizzle.contracts.CelebrityExchange.methods[\n\t\t\t\"sellOrderCount\"\n\t\t].cacheCall();\n\t\tsetSellOrderCount(tempSellOrderCount);\n\t\t//Fetch tokens from CelebrityToken\n\t\tconst tempTokensList = props.drizzle.contracts.TokenGenerator.methods[\n\t\t\t\"getAllCelebrities\"\n\t\t].cacheCall();\n\t\tsetTokensList(tempTokensList);\n\n\t\t// Fetch trades from events\n\t\tasync function getTrades(exchangeContract) {\n\t\t\tconst web3 = props.drizzle.web3;\n\t\t\tconst contract = props.drizzle.contracts[\"CelebrityExchange\"];\n\t\t\tconst yourContractWeb3 = new web3.eth.Contract(\n\t\t\t\tcontract.abi,\n\t\t\t\tcontract.address\n\t\t\t);\n\t\t\tlet completedBuyOrders = [];\n\t\t\tlet completedSellOrders = [];\n\n\t\t\tlet FilledBuyOrders = await yourContractWeb3.getPastEvents(\n\t\t\t\t\"BuyOrderFilled\",\n\t\t\t\t{\n\t\t\t\t\tfromBlock: 0,\n\t\t\t\t\ttoBlock: \"latest\",\n\t\t\t\t}\n\t\t\t);\n\t\t\tFilledBuyOrders.map((event) => {\n\t\t\t\tcompletedBuyOrders.push(event.returnValues);\n\t\t\t});\n\n\t\t\tlet FilledSellOrders = await yourContractWeb3.getPastEvents(\n\t\t\t\t\"SellOrderFilled\",\n\t\t\t\t{\n\t\t\t\t\tfromBlock: 0,\n\t\t\t\t\ttoBlock: \"latest\",\n\t\t\t\t}\n\t\t\t);\n\t\t\tconsole.log(FilledSellOrders);\n\t\t\tFilledSellOrders.map((event) => {\n\t\t\t\tcompletedSellOrders.push(event.returnValues);\n\t\t\t});\n\n\t\t\treturn setCompletedTrades(completedBuyOrders.concat(completedSellOrders));\n\t\t}\n\n\t\tlet trades = getTrades(props.drizzle.contracts.CelebrityExchange);\n\t\tprops.handleCompletedTrades(trades);\n\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [\n\t\tprops.drizzle.contracts.CelebrityExchange,\n\t\tprops.drizzle.contracts.TokenGenerator,\n\t\tevents,\n\t]);\n\n\treturn (\n\t\t<FetchContractData1\n\t\t\tdrizzle={props.drizzle}\n\t\t\tdrizzleState={props.drizzleState}\n\t\t\tbuyOrderCount={buyOrderCount}\n\t\t\thandleBuyOrders={props.handleBuyOrders}\n\t\t\tsellOrderCount={sellOrderCount}\n\t\t\thandleSellOrders={props.handleSellOrders}\n\t\t\thandleTokensList={props.handleTokensList}\n\t\t\ttokensList={tokensList}\n\t\t\thandleLatestPrice={props.handleLatestPrice}\n\t\t/>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}